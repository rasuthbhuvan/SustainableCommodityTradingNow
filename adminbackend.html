<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Commodity Trading - Complete Admin System</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background: #f5f5f5;
            min-height: 100vh;
            color: #333;
        }

        /* Mode Toggle */
        .mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 2000;
            background: #FFB400;
            color: #333;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .mode-toggle:hover {
            background: #e6a200;
        }

        /* Frontend View Styles */
        .frontend-view {
            display: none;
            background: white;
            color: #333;
            padding: 20px;
        }

        .frontend-view.active {
            display: block;
        }

        .frontend-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .search-section {
            background: white;
            border: 1.5px solid #FFB400;
            border-radius: 5px;
            padding: 30px;
            margin-bottom: 30px;
        }
        
        .search-bar {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .search-input {
            flex: 1;
            padding: 15px 20px;
            border: 1.5px solid #FFB400;
            border-radius: 5px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: border-color 0.3s ease;
        }
        
        .search-input:focus {
            outline: none;
            border-color: #333;
        }
        
        .search-button {
            padding: 15px 30px;
            background: #FFB400;
            color: white;
            border: 2px solid rgba(40, 40, 40, 0.2);
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
        }
        
        .search-button:hover {
            background: #CF9200;
            border-color: rgba(40, 40, 40, 0.3);
        }
        
        .category-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        .filter-btn {
            padding: 10px 20px;
            background: white;
            border: 1.5px solid #FFB400;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-family: 'Poppins', sans-serif;
            color: #333;
        }
        
        .filter-btn.active,
        .filter-btn:hover {
            background: #FFB400;
            color: #333;
        }
        
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }
        
        .category-card {
            background: white;
            border-radius: 5px;
            padding: 30px;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 1.5px solid #FFB400;
        }
        
        .category-card:hover {
            transform: translateY(-5px);
        }
        
        .category-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .category-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            border-bottom: 1.5px solid #FFB400;
            padding-bottom: 10px;
            margin-bottom: 15px;
        }
        
        .product-count {
            background: #FFB400;
            color: #333;
            padding: 5px 12px;
            border-radius: 5px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .product-list {
            list-style: none;
        }
        
        .product-item {
            padding: 15px;
            margin: 10px 0;
            background: rgba(255, 180, 0, 0.1);
            border-left: 4px solid #FFB400;
            border-radius: 5px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .product-item:hover {
            background: rgba(255, 180, 0, 0.2);
            transform: translateX(5px);
        }
        
        .product-name {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }
        
        .product-capacity {
            color: #666;
            font-size: 0.9rem;
        }

        /* Innovation Lab Section */
        .innovation-section {
            background: white;
            border-radius: 5px;
            padding: 60px 40px;
            margin-top: 30px;
            margin-bottom: 30px;
        }

        .innovation-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .innovation-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
        }

        .innovation-subtitle {
            font-size: 1.1rem;
            color: #666;
        }

        .innovation-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 50px;
            align-items: start;
        }

        .research-projects {
            background: white;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 30px;
        }

        .project-card {
            background: white;
            border: 1.5px solid #e2e8f0;
            border-left: 4px solid #4CAF50;
            border-radius: 5px;
            padding: 25px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .project-card:hover {
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            transform: translateY(-2px);
        }

        .project-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .project-phase {
            display: inline-block;
            background: #4CAF50;
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 500;
            margin-bottom: 10px;
        }

        .project-phase.pilot-testing {
            background: #ff9800;
        }

        .project-phase.research-phase {
            background: #2196f3;
        }

        .project-phase.manufacturing-phase {
            background: #4CAF50;
        }

        .project-expected {
            color: #666;
            font-size: 0.9rem;
        }

        .innovation-services {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }

        .service-card {
            background: #f8f9fa;
            border-radius: 5px;
            padding: 25px;
            text-align: center;
        }

        .service-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 15px;
        }

        .service-description {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .service-button {
            background: #333;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .service-button:hover {
            background: #555;
        }
        
        /* Contact Section */
        .contact-section {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 50%, #cbd5e1 100%);
            border-radius: 5px;
            padding: 60px 40px;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
        }
        
        .contact-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.1) 0%, transparent 50%),
                        radial-gradient(circle at 40% 40%, rgba(120, 219, 226, 0.1) 0%, transparent 50%);
        }
        
        .contact-content {
            position: relative;
            z-index: 1;
        }
        
        .contact-title {
            font-size: 2.8rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 20px;
            color: #1a202c;
            background: linear-gradient(135deg, #2d3748, #1a202c);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .contact-subtitle {
            text-align: center;
            font-size: 1.2rem;
            color: #4a5568;
            margin-bottom: 40px;
        }
        
        .contact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 50px;
            align-items: start;
        }
        
        .contact-info {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            border-radius: 5px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .contact-info h3 {
            font-size: 1.5rem;
            color: #2d3748;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .contact-item {
            margin: 25px 0;
            padding: 15px;
            background: rgba(255, 180, 0, 0.05);
            border-radius: 5px;
            border-left: 3px solid #FFB400;
        }
        
        .contact-item strong {
            color: #2d3748;
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .contact-item p {
            margin: 2px 0;
            color: #4a5568;
        }
        
        .contact-form {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 5px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            display: grid;
            gap: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        .form-label {
            margin-bottom: 8px;
            font-weight: 600;
            color: #2d3748;
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            padding: 12px 15px;
            border: 1.5px solid rgba(255, 180, 0, 0.3);
            border-radius: 5px;
            font-size: 1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.8);
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: #FFB400;
            background: white;
            box-shadow: 0 0 0 3px rgba(255, 180, 0, 0.1);
        }
        
        .submit-button {
            padding: 15px 30px;
            background: linear-gradient(135deg, #FFB400, #e6a200);
            color: #333;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            font-size: 1.1rem;
            font-family: 'Poppins', sans-serif;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 180, 0, 0.3);
        }
        
        .submit-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 180, 0, 0.4);
        }

        /* Product Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border: 1.5px solid #FFB400;
            border-radius: 5px;
            width: 999px;
            height: 550px;
            position: relative;
            animation: slideIn 0.3s ease;
            overflow: hidden;
            display: flex;
            flex-direction: row;
        }
        
        .modal-left {
            flex: 1;
            padding: 30px;
            overflow-y: auto;
        }
        
        .modal-right {
            width: 350px;
            background: rgba(255, 180, 0, 0.05);
            border-left: 1.5px solid #FFB400;
            padding: 30px;
            overflow-y: auto;
        }
        
        .close {
            color: #FFB400;
            position: absolute;
            right: 20px;
            top: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            z-index: 10;
        }
        
        .close:hover {
            color: #e6a200;
        }
        
        .modal h2 {
            color: #333;
            border-bottom: 1.5px solid #FFB400;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-weight: 600;
            font-size: 1.8rem;
        }
        
        .modal-section {
            margin-bottom: 25px;
        }
        
        .modal-section h3 {
            color: #FFB400;
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .spec-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 15px 0;
        }
        
        .spec-item {
            background: rgba(255, 180, 0, 0.1);
            padding: 8px 12px;
            border-radius: 5px;
            border-left: 1.5px solid #FFB400;
            font-size: 0.9rem;
        }
        
        /* Images and Videos Section */
        .media-section {
            margin-top: 20px;
            margin-bottom: 15px;
        }
        
        .media-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        
        .media-item {
            border: 1.5px solid #FFB400;
            border-radius: 5px;
            overflow: hidden;
            background: rgba(255, 180, 0, 0.1);
            padding: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .media-item:hover {
            background: rgba(255, 180, 0, 0.2);
            transform: translateY(-3px);
        }
        
        .media-placeholder {
            width: 100%;
            height: 80px;
            background: rgba(255, 180, 0, 0.2);
            border: 1.5px dashed #FFB400;
            border-radius: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFB400;
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.8rem;
        }

        .media-image {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 5px;
            margin-bottom: 5px;
        }
        
        .media-caption {
            font-size: 0.8rem;
            color: #333;
            font-weight: 500;
        }

        /* Smaller Request Quote Modal */
        .quote-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }

        .quote-modal-content {
            background: #2d3748;
            margin: 5% auto;
            padding: 0;
            border-radius: 5px;
            width: 85%;
            max-width: 500px;
            max-height: 85vh;
            position: relative;
            animation: slideIn 0.3s ease;
            color: white;
            overflow: hidden;
        }

        .quote-modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .quote-modal-header h2 {
            font-size: 1.3rem;
            font-weight: 600;
            color: white;
            margin: 0;
        }

        .quote-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
        }

        .quote-modal-body {
            padding: 25px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .quote-form-group {
            margin-bottom: 15px;
        }

        .quote-form-label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: white;
            font-size: 0.9rem;
        }

        .quote-form-input,
        .quote-form-select,
        .quote-form-textarea {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #4a5568;
            border-radius: 4px;
            background: #4a5568;
            color: white;
            font-family: 'Poppins', sans-serif;
            font-size: 0.9rem;
        }

        .quote-form-input::placeholder,
        .quote-form-textarea::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .quote-form-input:focus,
        .quote-form-select:focus,
        .quote-form-textarea:focus {
            outline: none;
            border-color: #48CAE4;
        }

        .quote-form-textarea {
            resize: vertical;
            min-height: 60px;
        }

        .quote-submit-button {
            width: 100%;
            padding: 12px;
            background: #48CAE4;
            color: #333;
            border: none;
            border-radius: 5px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 10px;
        }

        .quote-submit-button:hover {
            background: #0077B6;
            color: white;
        }

        /* Admin Panel Styles */
        .admin-view {
            display: none;
        }

        .admin-view.active {
            display: block;
        }
        
        .admin-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar */
        .sidebar {
            width: 280px;
            background: linear-gradient(135deg, #2d3748, #1a202c);
            color: white;
            padding: 20px 0;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }
        
        .sidebar-header {
            padding: 0 20px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 20px;
        }
        
        .sidebar-header h2 {
            color: #FFB400;
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .sidebar-header p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .sidebar-menu {
            list-style: none;
        }
        
        .sidebar-menu li {
            margin: 5px 0;
        }
        
        .sidebar-menu a {
            display: flex;
            align-items: center;
            padding: 15px 20px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }
        
        .sidebar-menu a:hover,
        .sidebar-menu a.active {
            background: rgba(255, 180, 0, 0.1);
            color: #FFB400;
            border-left-color: #FFB400;
        }
        
        .sidebar-menu a span {
            margin-left: 10px;
            font-weight: 500;
        }
        
        /* Main Content */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 20px;
        }
        
        .main-header {
            background: white;
            padding: 20px 30px;
            border-radius: 5px;
            margin-bottom: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .main-header h1 {
            color: #2d3748;
            font-weight: 600;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #FFB400, #e6a200);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        /* Content Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .content-section.active {
            display: block;
        }
        
        /* Stats Cards */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border-left: 4px solid #FFB400;
        }
        
        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: #FFB400;
            margin-bottom: 5px;
        }
        
        .stat-label {
            color: #666;
            font-weight: 500;
        }
        
        /* Tables */
        .table-container {
            background: white;
            border-radius: 5px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .table-header {
            padding: 20px 25px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .table-header h3 {
            color: #2d3748;
            font-weight: 600;
        }
        
        .add-btn {
            padding: 10px 20px;
            background: #FFB400;
            color: #333;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: background 0.3s ease;
        }
        
        .add-btn:hover {
            background: #e6a200;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th,
        .data-table td {
            padding: 15px 25px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .data-table th {
            background: #f7fafc;
            font-weight: 600;
            color: #2d3748;
        }
        
        .data-table tbody tr:hover {
            background: #f7fafc;
        }
        
        .action-btn {
            padding: 5px 10px;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.8rem;
            font-family: 'Poppins', sans-serif;
            margin: 0 2px;
        }
        
        .edit-btn {
            background: #4299e1;
            color: white;
        }
        
        .delete-btn {
            background: #f56565;
            color: white;
        }
        
        .view-btn {
            background: #48bb78;
            color: white;
        }

        .toggle-btn {
            background: #ed8936;
            color: white;
        }

        .hidden {
            opacity: 0.5;
            text-decoration: line-through;
        }

        /* Enhanced Admin Modal */
        .admin-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            animation: fadeIn 0.3s ease;
        }
        
        .admin-modal-content {
            background: white;
            margin: 2% auto;
            padding: 0;
            border-radius: 5px;
            width: 95%;
            max-width: 1000px;
            max-height: 95vh;
            position: relative;
            animation: slideIn 0.3s ease;
            overflow-y: auto;
        }
        
        .admin-modal-header {
            padding: 20px 25px;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: white;
            z-index: 10;
        }
        
        .admin-modal-header h3 {
            color: #2d3748;
            font-weight: 600;
        }
        
        .admin-modal-close {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
        }
        
        .admin-modal-close:hover {
            color: #333;
        }
        
        .admin-modal-body {
            padding: 25px;
        }

        /* Enhanced form layouts */
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-row-full {
            display: grid;
            grid-template-columns: 1fr;
            margin-bottom: 20px;
        }

        .form-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #FFB400;
        }

        .form-section h4 {
            color: #2d3748;
            margin-bottom: 15px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .dynamic-fields {
            border: 1px solid #e2e8f0;
            border-radius: 5px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .field-row {
            display: grid;
            grid-template-columns: 1fr 1fr auto;
            gap: 10px;
            margin-bottom: 10px;
            align-items: end;
        }

        .btn-small {
            padding: 8px 12px;
            background: #e2e8f0;
            color: #2d3748;
            border: none;
            border-radius: 3px;
            cursor: pointer;
            font-size: 0.9rem;
            font-family: 'Poppins', sans-serif;
        }

        .btn-small:hover {
            background: #cbd5e0;
        }

        .btn-add {
            background: #48bb78;
            color: white;
        }

        .btn-remove {
            background: #f56565;
            color: white;
        }

        .btn-primary {
            padding: 12px 24px;
            background: #FFB400;
            color: #333;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: background 0.3s ease;
        }
        
        .btn-primary:hover {
            background: #e6a200;
        }
        
        .btn-secondary {
            padding: 12px 24px;
            background: #e2e8f0;
            color: #2d3748;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            transition: background 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
        }

        /* Media Upload Section */
        .media-upload-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-bottom: 20px;
            border-left: 4px solid #FFB400;
        }

        .upload-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .upload-item {
            border: 2px dashed #FFB400;
            border-radius: 5px;
            padding: 20px;
            text-align: center;
            background: white;
            position: relative;
        }

        .upload-input {
            display: none;
        }

        .upload-label {
            cursor: pointer;
            display: block;
            color: #FFB400;
            font-weight: 500;
        }

        .upload-preview {
            max-width: 100%;
            max-height: 100px;
            margin-bottom: 10px;
            border-radius: 3px;
        }

        .upload-remove {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #f56565;
            color: white;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            cursor: pointer;
            font-size: 12px;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #666;
            font-size: 1.2rem;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .innovation-content {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .quote-modal-content {
                width: 95%;
                margin: 10% auto;
            }
            
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }

            .search-bar {
                flex-direction: column;
            }
            
            .contact-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }
            
            .contact-title {
                font-size: 2.2rem;
            }
            
            .contact-section {
                padding: 40px 20px;
            }

            .innovation-section {
                padding: 40px 20px;
            }
            
            .modal-content {
                width: 95%;
                height: 80vh;
                flex-direction: column;
            }
            
            .modal-right {
                width: 100%;
                border-left: none;
                border-top: 1.5px solid #FFB400;
            }
            
            .spec-grid {
                grid-template-columns: 1fr;
            }
            
            .media-grid {
                grid-template-columns: 1fr;
            }

            .upload-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<!-- Product Popup -->
<div id="productModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);align-items:center;justify-content:center;display:flex;">
  <div style="background:white;border:1px solid #FFB400;border-radius:5px;width:80%;max-width:700px;max-height:80vh;overflow:auto;display:flex;">
    <span onclick="closeProductModal()" style="position:absolute;top:10px;right:15px;cursor:pointer;font-size:24px;color:#FFB400;">√ó</span>
    <div id="modalLeft" style="flex:1;padding:20px;"></div>
    <div id="modalRight" style="width:300px;padding:20px;border-left:1px solid #FFB400;"></div>
  </div>
</div>
<body>
    <!-- Mode Toggle Button -->
    <button class="mode-toggle" onclick="toggleMode()" id="modeToggle">Switch to Admin</button>

    <!-- Frontend View -->
    <div class="frontend-view active" id="frontendView">
        <div class="frontend-container">
            <!-- Search Section -->
            <div class="search-section">
                <div class="search-bar">
                    <input type="text" class="search-input" placeholder="Search products, categories, or specifications..." id="searchInput">
                    <button class="search-button" onclick="searchProducts()">Search</button>
                </div>
                
                <div class="category-filters" id="categoryFilters">
                    <!-- Filters will be loaded dynamically -->
                </div>
            </div>

            <!-- Product Categories Grid -->
            <div class="products-grid" id="productsGrid">
                <!-- Categories will be loaded dynamically -->
            </div>

            <!-- No Results Message -->
            <div id="noResults" class="no-results" style="display: none;">
                No products found matching your search criteria.
            </div>

            <!-- Innovation Lab Section -->
            <div class="innovation-section">
                <div class="innovation-header">
                    <h2 class="innovation-title">Innovation Lab</h2>
                    <p class="innovation-subtitle">Pioneering research and development for next-generation sustainable materials</p>
                </div>

                <div class="innovation-content">
                    <div class="research-projects">
                        <h3 class="section-title">Current Research Projects</h3>
                        <div id="researchProjectsContainer">
                            <!-- Projects will be loaded dynamically -->
                        </div>
                    </div>

                    <div class="innovation-services">
                        <div class="service-card">
                            <h4 class="service-title">Custom Material Development</h4>
                            <p class="service-description">Collaborate with our R&D team to develop materials tailored to your specific requirements.</p>
                            <button class="service-button" onclick="openQuoteModal('Custom Material Development')">Start Project</button>
                        </div>

                        <div class="service-card">
                            <h4 class="service-title">Pilot Programs</h4>
                            <p class="service-description">Test our materials in your production environment with comprehensive support.</p>
                            <button class="service-button" onclick="openQuoteModal('Pilot Program')">Learn More</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Contact Section -->
            <div class="contact-section">
                <div class="contact-content">
                    <h2 class="contact-title">Get in Touch</h2>
                    <p class="contact-subtitle">Ready to transform your supply chain with sustainable materials?</p>
                    
                    <div class="contact-grid">
                        <div class="contact-info">
                            <h3>Contact Information</h3>
                            <div class="contact-item">
                                <strong>Sales & Inquiries</strong>
                                <p id="salesEmail">sales@commoditytrading.com</p>
                                <p id="salesPhone">+91-11-2345-6789</p>
                            </div>
                            <div class="contact-item">
                                <strong>Technical Support</strong>
                                <p id="techEmail">technical@commoditytrading.com</p>
                                <p id="techPhone">+91-11-2345-6790</p>
                            </div>
                            <div class="contact-item">
                                <strong>R&D Partnerships</strong>
                                <p id="rdEmail">innovation@commoditytrading.com</p>
                                <p id="rdPhone">+91-11-2345-6791</p>
                            </div>
                        </div>
                        
                        <form class="contact-form" onsubmit="submitForm(event)">
                            <div class="form-group">
                                <label class="form-label">Company Name</label>
                                <input type="text" class="form-input" name="company" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Contact Person</label>
                                <input type="text" class="form-input" name="contact" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-input" name="email" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Interest Area</label>
                                <select class="form-select" name="interest" required>
                                    <option value="">Select Category</option>
                                    <!-- Options will be loaded dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Message</label>
                                <textarea class="form-textarea" rows="4" name="message" required></textarea>
                            </div>
                            <button type="submit" class="submit-button">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Request Quote Modal -->
    <div id="quoteModal" class="quote-modal">
        <div class="quote-modal-content">
            <div class="quote-modal-header">
                <h2>Request Quote</h2>
                <button class="quote-close" onclick="closeQuoteModal()">&times;</button>
            </div>
            <div class="quote-modal-body">
                <form id="quoteForm" onsubmit="submitQuoteForm(event)">
                    <div class="quote-form-group">
                        <label class="quote-form-label">Company Name</label>
                        <input type="text" class="quote-form-input" name="company" required>
                    </div>
                    
                    <div class="quote-form-group">
                        <label class="quote-form-label">Contact Person</label>
                        <input type="text" class="quote-form-input" name="contact" required>
                    </div>
                    
                    <div class="quote-form-group">
                        <label class="quote-form-label">Email</label>
                        <input type="email" class="quote-form-input" name="email" required>
                    </div>
                    
                    <div class="quote-form-group">
                        <label class="quote-form-label">Material of Interest</label>
                        <select class="quote-form-select" name="material" required>
                            <option value="">Select Material</option>
                            <optgroup label="Sustainable Proteins">
                                <option value="poultry-protein">Poultry Waste-Derived Protein</option>
                                <option value="algae-protein">Algae-Based Protein</option>
                            </optgroup>
                            <optgroup label="Advanced Catalysts">
                                <option value="red-mud-pellets">Red Mud Pellets (ROSTA PELLET)</option>
                                <option value="bio-catalysts">Bio-Catalysts</option>
                            </optgroup>
                            <option value="Custom Material Development">Custom Material Development</option>
                            <option value="Pilot Program">Pilot Program</option>
                        </select>
                    </div>
                    
                    <div class="quote-form-group">
                        <label class="quote-form-label">Volume Required (tons/month)</label>
                        <input type="text" class="quote-form-input" name="volume" required>
                    </div>
                    
                    <div class="quote-form-group">
                        <label class="quote-form-label">Timeline</label>
                        <select class="quote-form-select" name="timeline" required>
                            <option value="">Select Timeline</option>
                            <option value="immediate">Immediate (0-30 days)</option>
                            <option value="short">Short-term (1-3 months)</option>
                            <option value="medium">Medium-term (3-6 months)</option>
                            <option value="long">Long-term (6+ months)</option>
                        </select>
                    </div>
                    
                    <div class="quote-form-group">
                        <label class="quote-form-label">Additional Requirements</label>
                        <textarea class="quote-form-textarea" rows="3" name="requirements" placeholder="Specific technical requirements, certifications needed, etc."></textarea>
                    </div>
                    
                    <button type="submit" class="quote-submit-button">Submit Inquiry</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Admin View -->
    <div class="admin-view" id="adminView">
        <div class="admin-container">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2>Admin Panel</h2>
                    <p>Commodity Trading System</p>
                </div>
                
                <ul class="sidebar-menu">
                    <li>
                        <a href="#" onclick="showSection('dashboard')" class="active">
                            <span>üìä</span>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('products')">
                            <span>üì¶</span>
                            <span>Products</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('categories')">
                            <span>üìã</span>
                            <span>Categories</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('projects')">
                            <span>üî¨</span>
                            <span>Research Projects</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('inquiries')">
                            <span>üìß</span>
                            <span>Inquiries</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('contacts')">
                            <span>üìû</span>
                            <span>Contact Settings</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" onclick="showSection('settings')">
                            <span>‚öôÔ∏è</span>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Main Content -->
            <div class="main-content">
                <div class="main-header">
                    <h1 id="pageTitle">Dashboard</h1>
                    <div class="user-info">
                        <span>Admin User</span>
                        <div class="user-avatar">A</div>
                    </div>
                </div>

                <!-- Dashboard Section -->
                <div id="dashboard" class="content-section active">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-number" id="totalProducts">0</div>
                            <div class="stat-label">Total Products</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalCategories">0</div>
                            <div class="stat-label">Categories</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalProjects">0</div>
                            <div class="stat-label">Research Projects</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-number" id="totalInquiries">0</div>
                            <div class="stat-label">Inquiries</div>
                        </div>
                    </div>

                    <div class="table-container">
                        <div class="table-header">
                            <h3>Recent Activity</h3>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Type</th>
                                    <th>Description</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>2024-03-15</td>
                                    <td>Product</td>
                                    <td>Added new product: Bio-Catalysts</td>
                                    <td>Active</td>
                                </tr>
                                <tr>
                                    <td>2024-03-14</td>
                                    <td>Inquiry</td>
                                    <td>New inquiry for Red Mud Pellets</td>
                                    <td>Pending</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Products Section -->
                <div id="products" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>Products Management</h3>
                            <button class="add-btn" onclick="openProductModal()">Add New Product</button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Title</th>
                                    <th>Category</th>
                                    <th>Capacity</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="productsTableBody">
                                <!-- Products will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Categories Section -->
                <div id="categories" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>Categories Management</h3>
                            <button class="add-btn" onclick="openCategoryModal()">Add New Category</button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Name</th>
                                    <th>Description</th>
                                    <th>Products Count</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="categoriesTableBody">
                                <!-- Categories will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Projects Section -->
                <div id="projects" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>Research Projects Management</h3>
                            <button class="add-btn" onclick="openProjectModal()">Add New Project</button>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Name</th>
                                    <th>Phase</th>
                                    <th>Expected Date</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="projectsTableBody">
                                <!-- Projects will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Inquiries Section -->
                <div id="inquiries" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>Customer Inquiries</h3>
                        </div>
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Date</th>
                                    <th>Company</th>
                                    <th>Contact</th>
                                    <th>Interest</th>
                                    <th>Status</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="inquiriesTableBody">
                                <!-- Inquiries will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Contact Settings Section -->
                <div id="contacts" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>Contact Information Settings</h3>
                            <button class="add-btn" onclick="saveContactSettings()">Save Changes</button>
                        </div>
                        <div style="padding: 25px;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Sales Email</label>
                                    <input type="email" class="form-input" id="salesEmailInput" value="sales@commoditytrading.com">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Sales Phone</label>
                                    <input type="text" class="form-input" id="salesPhoneInput" value="+91-11-2345-6789">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Technical Email</label>
                                    <input type="email" class="form-input" id="techEmailInput" value="technical@commoditytrading.com">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Technical Phone</label>
                                    <input type="text" class="form-input" id="techPhoneInput" value="+91-11-2345-6790">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">R&D Email</label>
                                    <input type="email" class="form-input" id="rdEmailInput" value="innovation@commoditytrading.com">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">R&D Phone</label>
                                    <input type="text" class="form-input" id="rdPhoneInput" value="+91-11-2345-6791">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Settings Section -->
                <div id="settings" class="content-section">
                    <div class="table-container">
                        <div class="table-header">
                            <h3>System Settings</h3>
                        </div>
                        <div style="padding: 25px;">
                            <h4>General Settings</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Site Title</label>
                                    <input type="text" class="form-input" value="Commodity Trading - Complete Admin System">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Admin Email</label>
                                    <input type="email" class="form-input" value="admin@commoditytrading.com">
                                </div>
                            </div>
                            
                            <h4 style="margin-top: 30px;">Display Settings</h4>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">Products per Page</label>
                                    <select class="form-select">
                                        <option value="10">10</option>
                                        <option value="20" selected>20</option>
                                        <option value="50">50</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Default View</label>
                                    <select class="form-select">
                                        <option value="grid" selected>Grid View</option>
                                        <option value="list">List View</option>
                                    </select>
                                </div>
                            </div>
                            
                            <button class="btn-primary" style="margin-top: 20px;">Save Settings</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Modals -->
    <div id="adminModal" class="admin-modal">
        <div class="admin-modal-content">
            <div class="admin-modal-header">
                <h3 id="adminModalTitle">Add New Item</h3>
                <button class="admin-modal-close" onclick="closeAdminModal()">&times;</button>
            </div>
            <div class="admin-modal-body" id="adminModalBody">
                <!-- Modal content will be loaded dynamically -->
            </div>
        </div>
    </div>

    <script>
        // Data Manager - Central data management
        const dataManager = {
            products: {
                'poultry-protein': {
                    id: 'poultry-protein',
                    title: 'Poultry Waste-Derived Protein',
                    category: 'proteins',
                    overview: 'High-quality protein extracted from poultry waste streams through advanced bioprocessing techniques.',
                    specifications: {
                        'Protein Content': '85-92%',
                        'Moisture': '<8%',
                        'pH Level': '6.5-7.5',
                        'Particle Size': '100-500 Œºm',
                        'Shelf Life': '24 months',
                        'Storage': 'Cool, dry place'
                    },
                    capacity: {
                        'Monthly Capacity': '50 tons/month',
                        'Lead Time': '2-3 weeks',
                        'Minimum Order': '1 ton'
                    },
                    applications: ['Animal Feed', 'Fertilizer', 'Industrial Applications'],
                    certifications: ['ISO 9001', 'HACCP', 'Organic Certified'],
                    status: 'active'
                },
                'algae-protein': {
                    id: 'algae-protein',
                    title: 'Algae-Based Protein',
                    category: 'proteins',
                    overview: 'Sustainable protein derived from specially cultivated algae strains with high nutritional value.',
                    specifications: {
                        'Protein Content': '60-70%',
                        'Omega-3 Content': '15-25%',
                        'Moisture': '<10%',
                        'Chlorophyll': '2-4%',
                        'Heavy Metals': '<10 ppm',
                        'Microbiological': 'Compliant'
                    },
                    capacity: {
                        'Monthly Capacity': '25 tons/month',
                        'Lead Time': '3-4 weeks',
                        'Minimum Order': '500 kg'
                    },
                    applications: ['Nutraceuticals', 'Food Supplements', 'Cosmetics'],
                    certifications: ['Organic', 'Non-GMO', 'Vegan Certified'],
                    status: 'active'
                },
                'red-mud-pellets': {
                    id: 'red-mud-pellets',
                    title: 'Red Mud Pellets (ROSTA PELLET)',
                    category: 'catalysts',
                    overview: 'Advanced catalyst pellets manufactured from red mud waste for industrial applications.',
                    specifications: {
                        'Al2O3 Content': '35-45%',
                        'Fe2O3 Content': '30-40%',
                        'Surface Area': '150-200 m¬≤/g',
                        'Pellet Size': '3-5 mm',
                        'Crush Strength': '>50 N',
                        'Porosity': '40-50%'
                    },
                    capacity: {
                        'Monthly Capacity': '500 tons/month',
                        'Lead Time': '4-6 weeks',
                        'Minimum Order': '10 tons'
                    },
                    applications: ['Petrochemical Catalysis', 'Environmental Remediation', 'Water Treatment'],
                    certifications: ['ISO 14001', 'REACH Compliant'],
                    status: 'active'
                },
                'bio-catalysts': {
                    id: 'bio-catalysts',
                    title: 'Bio-Catalysts',
                    category: 'catalysts',
                    overview: 'Enzyme-based catalysts for sustainable chemical processing and biotechnology applications.',
                    specifications: {
                        'Enzyme Activity': '1000-5000 U/g',
                        'Temperature Range': '20-80¬∞C',
                        'pH Range': '4-9',
                        'Stability': '12 months at 4¬∞C',
                        'Purity': '>95%',
                        'Moisture': '<5%'
                    },
                    capacity: {
                        'Monthly Capacity': '10 tons/month',
                        'Lead Time': '6-8 weeks',
                        'Minimum Order': '100 kg'
                    },
                    applications: ['Pharmaceutical Manufacturing', 'Food Processing', 'Textile Industry'],
                    certifications: ['GMP', 'FDA Approved', 'Kosher'],
                    status: 'active'
                }
            },
            
            categories: {
                'proteins': {
                    id: 'proteins',
                    name: 'Sustainable Proteins',
                    description: 'High-quality proteins derived from waste sources for various industrial applications'
                },
                'catalysts': {
                    id: 'catalysts',
                    name: 'Advanced Catalysts',
                    description: 'Innovative catalysts from industrial waste streams for green manufacturing'
                }
            },
            
            researchProjects: [
                {
                    id: 'next-gen-protein',
                    name: 'Next-Gen Protein Extraction',
                    phase: 'manufacturing-phase',
                    expected: 'Q2 2026',
                    status: 'active'
                },
                {
                    id: 'metal-recovery',
                    name: 'Advanced Metal Recovery Systems',
                    phase: 'pilot-testing',
                    expected: 'Q4 2025',
                    status: 'active'
                },
                {
                    id: 'waste-energy-catalysts',
                    name: 'Waste-to-Energy Catalysts',
                    phase: 'research-phase',
                    expected: 'Q3 2026',
                    status: 'active'
                }
            ],
            
            inquiries: [],
            
            // Helper methods
            getProductsByCategory: function(categoryId) {
                return Object.values(this.products).filter(product => 
                    product.category === categoryId && product.status === 'active'
                );
            },
            
            getCategoryProductCount: function(categoryId) {
                return this.getProductsByCategory(categoryId).length;
            }
        };

        // UI Manager - Handle all UI interactions
        const uiManager = {
            currentView: 'frontend',
            currentAdminSection: 'dashboard',
            
            init: function() {
                this.loadFrontendData();
                this.updateStats();
                this.loadAdminTables();
            },
            
            loadFrontendData: function() {
                this.renderCategories();
                this.renderCategoryFilters();
                this.renderResearchProjects();
            },
            
            renderCategories: function() {
                const grid = document.getElementById('productsGrid');
                if (!grid) return;
                
                const categories = Object.values(dataManager.categories);
                
                grid.innerHTML = categories.map(category => {
                    const products = dataManager.getProductsByCategory(category.id);
                    const productCount = products.length;
                    
                    return `
                        <div class="category-card" data-category="${category.id}">
                            <div class="category-header">
                                <div>
                                    <h3 class="category-title">${category.name}</h3>
                                    <p class="category-description">${category.description}</p>
                                </div>
                                <span class="product-count">${productCount} products</span>
                            </div>
                            <ul class="product-list">
                                ${products.map(product => `
                                    <li class="product-item" onclick="openProductModal('${product.id}')">
                                        <div class="product-name">${product.title}</div>
                                        <div class="product-capacity">Capacity: ${product.capacity['Monthly Capacity']}</div>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    `;
                }).join('');
            },
            
            renderCategoryFilters: function() {
                const filtersContainer = document.getElementById('categoryFilters');
                if (!filtersContainer) return;
                
                const categories = Object.values(dataManager.categories);
                
                filtersContainer.innerHTML = `
                    <button class="filter-btn active" onclick="filterCategory('all')">All Categories</button>
                    ${categories.map(category => `
                        <button class="filter-btn" onclick="filterCategory('${category.id}')">${category.name}</button>
                    `).join('')}
                `;
                
                // Update form select options
                const interestSelect = document.querySelector('select[name="interest"]');
                if (interestSelect) {
                    interestSelect.innerHTML = `
                        <option value="">Select Category</option>
                        ${categories.map(category => `
                            <option value="${category.id}">${category.name}</option>
                        `).join('')}
                        <option value="custom">Custom Development</option>
                    `;
                }
            },
            
            renderResearchProjects: function() {
                const container = document.getElementById('researchProjectsContainer');
                if (!container) return;
                
                container.innerHTML = dataManager.researchProjects.map(project => `
                    <div class="project-card">
                        <h4 class="project-name">${project.name}</h4>
                        <div class="project-phase ${project.phase}">${project.phase.replace('-', ' ')}</div>
                        <div class="project-expected">Expected: ${project.expected}</div>
                    </div>
                `).join('');
            },
            
            updateStats: function() {
                const totalProducts = Object.keys(dataManager.products).length;
                const totalCategories = Object.keys(dataManager.categories).length;
                const totalProjects = dataManager.researchProjects.length;
                const totalInquiries = dataManager.inquiries.length;
                
                // Update dashboard stats
                const statsElements = {
                    totalProducts: document.getElementById('totalProducts'),
                    totalCategories: document.getElementById('totalCategories'),
                    totalProjects: document.getElementById('totalProjects'),
                    totalInquiries: document.getElementById('totalInquiries')
                };
                
                if (statsElements.totalProducts) statsElements.totalProducts.textContent = totalProducts;
                if (statsElements.totalCategories) statsElements.totalCategories.textContent = totalCategories;
                if (statsElements.totalProjects) statsElements.totalProjects.textContent = totalProjects;
                if (statsElements.totalInquiries) statsElements.totalInquiries.textContent = totalInquiries;
            },
            
            loadAdminTables: function() {
                this.loadProductsTable();
                this.loadCategoriesTable();
                this.loadProjectsTable();
                this.loadInquiriesTable();
            },
            
            loadProductsTable: function() {
                const tbody = document.getElementById('productsTableBody');
                if (!tbody) return;
                
                tbody.innerHTML = Object.values(dataManager.products).map(product => `
                    <tr>
                        <td>${product.id}</td>
                        <td>${product.title}</td>
                        <td>${dataManager.categories[product.category].name}</td>
                        <td>${product.capacity['Monthly Capacity']}</td>
                        <td><span class="status ${product.status}">${product.status}</span></td>
                        <td>
                            <button class="action-btn edit-btn" onclick="editProduct('${product.id}')">Edit</button>
                            <button class="action-btn view-btn" onclick="viewProduct('${product.id}')">View</button>
                            <button class="action-btn toggle-btn" onclick="toggleProduct('${product.id}')">
                                ${product.status === 'active' ? 'Hide' : 'Show'}
                            </button>
                            <button class="action-btn delete-btn" onclick="deleteProduct('${product.id}')">Delete</button>
                        </td>
                    </tr>
                `).join('');
            },
            
            loadCategoriesTable: function() {
                const tbody = document.getElementById('categoriesTableBody');
                if (!tbody) return;
                
                tbody.innerHTML = Object.values(dataManager.categories).map(category => `
                    <tr>
                        <td>${category.id}</td>
                        <td>${category.name}</td>
                        <td>${category.description}</td>
                        <td>${dataManager.getCategoryProductCount(category.id)}</td>
                        <td>
                            <button class="action-btn edit-btn" onclick="editCategory('${category.id}')">Edit</button>
                            <button class="action-btn delete-btn" onclick="deleteCategory('${category.id}')">Delete</button>
                        </td>
                    </tr>
                `).join('');
            },
            
            loadProjectsTable: function() {
                const tbody = document.getElementById('projectsTableBody');
                if (!tbody) return;
                
                tbody.innerHTML = dataManager.researchProjects.map(project => `
                    <tr>
                        <td>${project.name}</td>
                        <td><span class="project-phase ${project.phase}">${project.phase.replace('-', ' ')}</span></td>
                        <td>${project.expected}</td>
                        <td>${project.status}</td>
                        <td>
                            <button class="action-btn edit-btn" onclick="editProject('${project.id}')">Edit</button>
                            <button class="action-btn delete-btn" onclick="deleteProject('${project.id}')">Delete</button>
                        </td>
                    </tr>
                `).join('');
            },
            
            loadInquiriesTable: function() {
                const tbody = document.getElementById('inquiriesTableBody');
                if (!tbody) return;
                
                if (dataManager.inquiries.length === 0) {
                    tbody.innerHTML = '<tr><td colspan="6" style="text-align: center; padding: 40px; color: #666;">No inquiries yet</td></tr>';
                    return;
                }
                
                tbody.innerHTML = dataManager.inquiries.map(inquiry => `
                    <tr>
                        <td>${inquiry.date}</td>
                        <td>${inquiry.company}</td>
                        <td>${inquiry.contact}</td>
                        <td>${inquiry.interest}</td>
                        <td>${inquiry.status || 'New'}</td>
                        <td>
                            <button class="action-btn view-btn" onclick="viewInquiry('${inquiry.id}')">View</button>
                            <button class="action-btn delete-btn" onclick="deleteInquiry('${inquiry.id}')">Delete</button>
                        </td>
                    </tr>
                `).join('');
            }
        };

        // Global functions for UI interactions
        function toggleMode() {
            const frontendView = document.getElementById('frontendView');
            const adminView = document.getElementById('adminView');
            const toggleButton = document.getElementById('modeToggle');
            
            if (uiManager.currentView === 'frontend') {
                // Switch to admin
                frontendView.classList.remove('active');
                adminView.classList.add('active');
                toggleButton.textContent = 'Switch to Frontend';
                uiManager.currentView = 'admin';
            } else {
                // Switch to frontend  
                adminView.classList.remove('active');
                frontendView.classList.add('active');
                toggleButton.textContent = 'Switch to Admin';
                uiManager.currentView = 'frontend';
            }
        }

        function showSection(sectionId) {
            // Update active menu item
            document.querySelectorAll('.sidebar-menu a').forEach(link => {
                link.classList.remove('active');
            });
            event.target.closest('a').classList.add('active');
            
            // Show selected section
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
            
            // Update page title
            const titles = {
                dashboard: 'Dashboard',
                products: 'Products Management',
                categories: 'Categories Management',
                projects: 'Research Projects',
                inquiries: 'Customer Inquiries',
                contacts: 'Contact Settings',
                settings: 'System Settings'
            };
            document.getElementById('pageTitle').textContent = titles[sectionId];
            
            uiManager.currentAdminSection = sectionId;
        }

        // Product modal functions
        function openProductModal(productId) {
            const product = dataManager.products[productId];
            if (!product) return;
            
            const modal = document.getElementById('productModal');
            const modalLeft = document.getElementById('modalLeft');
            const modalRight = document.getElementById('modalRight');
            
            // Left side - Overview and details
            modalLeft.innerHTML = `
                <h2>${product.title}</h2>
                <div class="modal-section">
                    <h3>Overview</h3>
                    <p>${product.overview}</p>
                </div>
                <div class="modal-section">
                    <h3>Applications</h3>
                    <ul>
                        ${product.applications.map(app => `<li>${app}</li>`).join('')}
                    </ul>
                </div>
                <div class="modal-section">
                    <h3>Certifications</h3>
                    <div class="spec-grid">
                        ${product.certifications.map(cert => `
                            <div class="spec-item">${cert}</div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            // Right side - Specifications and capacity
            modalRight.innerHTML = `
                <div class="modal-section">
                    <h3>Specifications</h3>
                    <div class="spec-grid">
                        ${Object.entries(product.specifications).map(([key, value]) => `
                            <div class="spec-item"><strong>${key}:</strong><br>${value}</div>
                        `).join('')}
                    </div>
                </div>
                <div class="modal-section">
                    <h3>Capacity & Logistics</h3>
                    <div class="spec-grid">
                        ${Object.entries(product.capacity).map(([key, value]) => `
                            <div class="spec-item"><strong>${key}:</strong><br>${value}</div>
                        `).join('')}
                    </div>
                </div>
                <div class="modal-section">
                    <button class="btn-primary" onclick="openQuoteModal('${product.title}')" style="width: 100%; margin-top: 20px;">
                        Request Quote
                    </button>
                </div>
            `;
            
            modal.style.display = 'flex';
        }

        function closeProductModal() {
            document.getElementById('productModal').style.display = 'none';
        }

        // Search and filter functions
        function searchProducts() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const cards = document.querySelectorAll('.category-card');
            const noResults = document.getElementById('noResults');
            let hasResults = false;
            
            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm) || searchTerm === '') {
                    card.style.display = 'block';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });

            noResults.style.display = hasResults ? 'none' : 'block';
        }

        function filterCategory(category) {
            const cards = document.querySelectorAll('.category-card');
            const filterBtns = document.querySelectorAll('.filter-btn');
            const noResults = document.getElementById('noResults');
            let hasResults = false;
            
            // Update active filter button
            filterBtns.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Show/hide cards
            cards.forEach(card => {
                if (category === 'all' || card.dataset.category === category) {
                    card.style.display = 'block';
                    hasResults = true;
                } else {
                    card.style.display = 'none';
                }
            });

            noResults.style.display = hasResults ? 'none' : 'block';
            document.getElementById('searchInput').value = '';
        }

        // Quote modal functions
        function openQuoteModal(service) {
            document.getElementById('quoteModal').style.display = 'block';
            
            const materialSelect = document.querySelector('#quoteForm select[name="material"]');
            if (service && materialSelect) {
                // Try to find matching option
                const options = materialSelect.querySelectorAll('option');
                for (let option of options) {
                    if (option.value === service || option.textContent.includes(service)) {
                        materialSelect.value = option.value;
                        break;
                    }
                }
            }
        }

        function closeQuoteModal() {
            document.getElementById('quoteModal').style.display = 'none';
        }

        function submitQuoteForm(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const quoteData = {
                id: Date.now().toString(),
                company: formData.get('company'),
                contact: formData.get('contact'),
                email: formData.get('email'),
                material: formData.get('material'),
                volume: formData.get('volume'),
                timeline: formData.get('timeline'),
                requirements: formData.get('requirements'),
                date: new Date().toLocaleDateString(),
                type: 'quote'
            };
            
            // Add to inquiries
            dataManager.inquiries.push(quoteData);
            
            // Update UI
            uiManager.updateStats();
            uiManager.loadInquiriesTable();
            
            alert('Thank you for your quote request! We will contact you soon.');
            event.target.reset();
            closeQuoteModal();
        }

        // Form submission
        function submitForm(event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const inquiryData = {
                id: Date.now().toString(),
                company: formData.get('company'),
                contact: formData.get('contact'),
                email: formData.get('email'),
                interest: formData.get('interest'),
                message: formData.get('message'),
                date: new Date().toLocaleDateString(),
                type: 'contact'
            };
            
            // Add to inquiries
            dataManager.inquiries.push(inquiryData);
            
            // Update UI
            uiManager.updateStats();
            uiManager.loadInquiriesTable();
            
            alert('Thank you for your message! We will contact you soon.');
            event.target.reset();
        }

        // Admin functions - Products
        function openProductModal() {
            // Admin product modal (different from frontend modal)
            showAdminModal('Add New Product', getProductFormHTML());
        }

        function editProduct(productId) {
            const product = dataManager.products[productId];
            showAdminModal('Edit Product', getProductFormHTML(product));
        }

        function viewProduct(productId) {
            openProductModal(productId); // Use frontend modal for viewing
        }

        function toggleProduct(productId) {
            const product = dataManager.products[productId];
            product.status = product.status === 'active' ? 'inactive' : 'active';
            uiManager.loadProductsTable();
            uiManager.loadFrontendData(); // Refresh frontend
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                delete dataManager.products[productId];
                uiManager.loadProductsTable();
                uiManager.updateStats();
                uiManager.loadFrontendData();
            }
        }

        // Admin functions - Categories
        function openCategoryModal() {
            showAdminModal('Add New Category', getCategoryFormHTML());
        }

        function editCategory(categoryId) {
            const category = dataManager.categories[categoryId];
            showAdminModal('Edit Category', getCategoryFormHTML(category));
        }

        function deleteCategory(categoryId) {
            // Check if category has products
            const hasProducts = Object.values(dataManager.products).some(p => p.category === categoryId);
            if (hasProducts) {
                alert('Cannot delete category that contains products. Please move or delete products first.');
                return;
            }
            
            if (confirm('Are you sure you want to delete this category?')) {
                delete dataManager.categories[categoryId];
                uiManager.loadCategoriesTable();
                uiManager.updateStats();
                uiManager.loadFrontendData();
            }
        }

        // Admin functions - Projects
        function openProjectModal() {
            showAdminModal('Add New Project', getProjectFormHTML());
        }

        function editProject(projectId) {
            const project = dataManager.researchProjects.find(p => p.id === projectId);
            showAdminModal('Edit Project', getProjectFormHTML(project));
        }

        function deleteProject(projectId) {
            if (confirm('Are you sure you want to delete this project?')) {
                dataManager.researchProjects = dataManager.researchProjects.filter(p => p.id !== projectId);
                uiManager.loadProjectsTable();
                uiManager.updateStats();
                uiManager.renderResearchProjects();
            }
        }

        // Admin functions - Inquiries
        function viewInquiry(inquiryId) {
            const inquiry = dataManager.inquiries.find(i => i.id === inquiryId);
            if (!inquiry) return;
            
            const content = `
                <div class="form-section">
                    <h4>Contact Information</h4>
                    <p><strong>Company:</strong> ${inquiry.company}</p>
                    <p><strong>Contact Person:</strong> ${inquiry.contact}</p>
                    <p><strong>Email:</strong> ${inquiry.email}</p>
                    <p><strong>Date:</strong> ${inquiry.date}</p>
                </div>
                <div class="form-section">
                    <h4>Inquiry Details</h4>
                    ${inquiry.material ? `<p><strong>Material:</strong> ${inquiry.material}</p>` : ''}
                    ${inquiry.volume ? `<p><strong>Volume:</strong> ${inquiry.volume}</p>` : ''}
                    ${inquiry.timeline ? `<p><strong>Timeline:</strong> ${inquiry.timeline}</p>` : ''}
                    ${inquiry.interest ? `<p><strong>Interest Area:</strong> ${inquiry.interest}</p>` : ''}
                    ${inquiry.message ? `<p><strong>Message:</strong> ${inquiry.message}</p>` : ''}
                    ${inquiry.requirements ? `<p><strong>Requirements:</strong> ${inquiry.requirements}</p>` : ''}
                </div>
            `;
            
            showAdminModal('View Inquiry', content);
        }

        function deleteInquiry(inquiryId) {
            if (confirm('Are you sure you want to delete this inquiry?')) {
                dataManager.inquiries = dataManager.inquiries.filter(i => i.id !== inquiryId);
                uiManager.loadInquiriesTable();
                uiManager.updateStats();
            }
        }

        // Admin modal functions
        function showAdminModal(title, content) {
            document.getElementById('adminModalTitle').textContent = title;
            document.getElementById('adminModalBody').innerHTML = content;
            document.getElementById('adminModal').style.display = 'block';
        }

        function closeAdminModal() {
            document.getElementById('adminModal').style.display = 'none';
        }

        // Form generators
        function getProductFormHTML(product = null) {
            const isEdit = !!product;
            const categories = Object.values(dataManager.categories);
            
            return `
                <form onsubmit="saveProduct(event, ${isEdit ? `'${product.id}'` : 'null'})">
                    <div class="form-section">
                        <h4>Basic Information</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Product Title</label>
                                <input type="text" class="form-input" name="title" value="${product ? product.title : ''}" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Category</label>
                                <select class="form-select" name="category" required>
                                    <option value="">Select Category</option>
                                    ${categories.map(cat => `
                                        <option value="${cat.id}" ${product && product.category === cat.id ? 'selected' : ''}>
                                            ${cat.name}
                                        </option>
                                    `).join('')}
                                </select>
                            </div>
                        </div>
                        <div class="form-row-full">
                            <div class="form-group">
                                <label class="form-label">Overview</label>
                                <textarea class="form-input" name="overview" rows="3" required>${product ? product.overview : ''}</textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4>Specifications</h4>
                        <div id="specificationsFields">
                            ${product ? Object.entries(product.specifications).map(([key, value]) => `
                                <div class="field-row">
                                    <input type="text" class="form-input" name="spec_key[]" value="${key}" placeholder="Specification Name">
                                    <input type="text" class="form-input" name="spec_value[]" value="${value}" placeholder="Value">
                                    <button type="button" class="btn-small btn-remove" onclick="removeField(this)">Remove</button>
                                </div>
                            `).join('') : '<div class="field-row"><input type="text" class="form-input" name="spec_key[]" placeholder="Specification Name"><input type="text" class="form-input" name="spec_value[]" placeholder="Value"><button type="button" class="btn-small btn-remove" onclick="removeField(this)">Remove</button></div>'}
                        </div>
                        <button type="button" class="btn-small btn-add" onclick="addSpecField()">Add Specification</button>
                    </div>
                    
                    <div class="form-section">
                        <h4>Capacity Information</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Monthly Capacity</label>
                                <input type="text" class="form-input" name="monthly_capacity" value="${product ? product.capacity['Monthly Capacity'] : ''}" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Lead Time</label>
                                <input type="text" class="form-input" name="lead_time" value="${product ? product.capacity['Lead Time'] : ''}" required>
                            </div>
                        </div>
                        <div class="form-row-full">
                            <div class="form-group">
                                <label class="form-label">Minimum Order</label>
                                <input type="text" class="form-input" name="minimum_order" value="${product ? product.capacity['Minimum Order'] : ''}" required>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h4>Applications & Certifications</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Applications (comma-separated)</label>
                                <textarea class="form-input" name="applications" rows="2">${product ? product.applications.join(', ') : ''}</textarea>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Certifications (comma-separated)</label>
                                <textarea class="form-input" name="certifications" rows="2">${product ? product.certifications.join(', ') : ''}</textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn-secondary" onclick="closeAdminModal()">Cancel</button>
                        <button type="submit" class="btn-primary">${isEdit ? 'Update' : 'Add'} Product</button>
                    </div>
                </form>
            `;
        }

        function getCategoryFormHTML(category = null) {
            const isEdit = !!category;
            
            return `
                <form onsubmit="saveCategory(event, ${isEdit ? `'${category.id}'` : 'null'})">
                    <div class="form-section">
                        <h4>Category Information</h4>
                        <div class="form-row-full">
                            <div class="form-group">
                                <label class="form-label">Category Name</label>
                                <input type="text" class="form-input" name="name" value="${category ? category.name : ''}" required>
                            </div>
                        </div>
                        <div class="form-row-full">
                            <div class="form-group">
                                <label class="form-label">Description</label>
                                <textarea class="form-input" name="description" rows="3" required>${category ? category.description : ''}</textarea>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn-secondary" onclick="closeAdminModal()">Cancel</button>
                        <button type="submit" class="btn-primary">${isEdit ? 'Update' : 'Add'} Category</button>
                    </div>
                </form>
            `;
        }

        function getProjectFormHTML(project = null) {
            const isEdit = !!project;
            
            return `
                <form onsubmit="saveProject(event, ${isEdit ? `'${project.id}'` : 'null'})">
                    <div class="form-section">
                        <h4>Project Information</h4>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Project Name</label>
                                <input type="text" class="form-input" name="name" value="${project ? project.name : ''}" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Phase</label>
                                <select class="form-select" name="phase" required>
                                    <option value="">Select Phase</option>
                                    <option value="research-phase" ${project && project.phase === 'research-phase' ? 'selected' : ''}>Research Phase</option>
                                    <option value="pilot-testing" ${project && project.phase === 'pilot-testing' ? 'selected' : ''}>Pilot Testing</option>
                                    <option value="manufacturing-phase" ${project && project.phase === 'manufacturing-phase' ? 'selected' : ''}>Manufacturing Phase</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label">Expected Completion</label>
                                <input type="text" class="form-input" name="expected" value="${project ? project.expected : ''}" placeholder="e.g., Q2 2026" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Status</label>
                                <select class="form-select" name="status" required>
                                    <option value="active" ${project && project.status === 'active' ? 'selected' : ''}>Active</option>
                                    <option value="inactive" ${project && project.status === 'inactive' ? 'selected' : ''}>Inactive</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    
                    <div style="text-align: right; margin-top: 20px;">
                        <button type="button" class="btn-secondary" onclick="closeAdminModal()">Cancel</button>
                        <button type="submit" class="btn-primary">${isEdit ? 'Update' : 'Add'} Project</button>
                    </div>
                </form>
            `;
        }

        // Form save functions
        function saveProduct(event, productId) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            // Generate ID for new products
            const id = productId || formData.get('title').toLowerCase().replace(/[^a-z0-9]/g, '-').replace(/-+/g, '-');
            
            // Build specifications object
            const specKeys = formData.getAll('spec_key[]');
            const specValues = formData.getAll('spec_value[]');
            const specifications = {};
            specKeys.forEach((key, index) => {
                if (key && specValues[index]) {
                    specifications[key] = specValues[index];
                }
            });
            
            // Build product object
            const product = {
                id: id,
                title: formData.get('title'),
                category: formData.get('category'),
                overview: formData.get('overview'),
                specifications: specifications,
                capacity: {
                    'Monthly Capacity': formData.get('monthly_capacity'),
                    'Lead Time': formData.get('lead_time'),
                    'Minimum Order': formData.get('minimum_order')
                },
                applications: formData.get('applications').split(',').map(s => s.trim()).filter(s => s),
                certifications: formData.get('certifications').split(',').map(s => s.trim()).filter(s => s),
                status: 'active'
            };
            
            dataManager.products[id] = product;
            
            // Update UI
            uiManager.loadProductsTable();
            uiManager.updateStats();
            uiManager.loadFrontendData();
            closeAdminModal();
            
            alert(`Product ${productId ? 'updated' : 'added'} successfully!`);
        }

        function saveCategory(event, categoryId) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const id = categoryId || formData.get('name').toLowerCase().replace(/[^a-z0-9]/g, '-');
            
            const category = {
                id: id,
                name: formData.get('name'),
                description: formData.get('description')
            };
            
            dataManager.categories[id] = category;
            
            // Update UI
            uiManager.loadCategoriesTable();
            uiManager.updateStats();
            uiManager.loadFrontendData();
            closeAdminModal();
            
            alert(`Category ${categoryId ? 'updated' : 'added'} successfully!`);
        }

        function saveProject(event, projectId) {
            event.preventDefault();
            const formData = new FormData(event.target);
            
            const id = projectId || Date.now().toString();
            
            const project = {
                id: id,
                name: formData.get('name'),
                phase: formData.get('phase'),
                expected: formData.get('expected'),
                status: formData.get('status')
            };
            
            if (projectId) {
                // Update existing
                const index = dataManager.researchProjects.findIndex(p => p.id === projectId);
                if (index !== -1) {
                    dataManager.researchProjects[index] = project;
                }
            } else {
                // Add new
                dataManager.researchProjects.push(project);
            }
            
            // Update UI
            uiManager.loadProjectsTable();
            uiManager.updateStats();
            uiManager.renderResearchProjects();
            closeAdminModal();
            
            alert(`Project ${projectId ? 'updated' : 'added'} successfully!`);
        }

        // Helper functions for dynamic form fields
        function addSpecField() {
            const container = document.getElementById('specificationsFields');
            const fieldRow = document.createElement('div');
            fieldRow.className = 'field-row';
            fieldRow.innerHTML = `
                <input type="text" class="form-input" name="spec_key[]" placeholder="Specification Name">
                <input type="text" class="form-input" name="spec_value[]" placeholder="Value">
                <button type="button" class="btn-small btn-remove" onclick="removeField(this)">Remove</button>
            `;
            container.appendChild(fieldRow);
        }

        function removeField(button) {
            button.parentElement.remove();
        }

        // Contact settings
        function saveContactSettings() {
            const settings = {
                salesEmail: document.getElementById('salesEmailInput').value,
                salesPhone: document.getElementById('salesPhoneInput').value,
                techEmail: document.getElementById('techEmailInput').value,
                techPhone: document.getElementById('techPhoneInput').value,
                rdEmail: document.getElementById('rdEmailInput').value,
                rdPhone: document.getElementById('rdPhoneInput').value
            };
            
            // Update frontend display
            document.getElementById('salesEmail').textContent = settings.salesEmail;
            document.getElementById('salesPhone').textContent = settings.salesPhone;
            document.getElementById('techEmail').textContent = settings.techEmail;
            document.getElementById('techPhone').textContent = settings.techPhone;
            document.getElementById('rdEmail').textContent = settings.rdEmail;
            document.getElementById('rdPhone').textContent = settings.rdPhone;
            
            alert('Contact settings saved successfully!');
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            uiManager.init();
            
            // Search input event listener
            const searchInput = document.getElementById('searchInput');
            if (searchInput) {
                searchInput.addEventListener('input', function(e) {
                    if (e.target.value.length > 0) {
                        searchProducts();
                    } else {
                        document.querySelectorAll('.category-card').forEach(card => {
                            card.style.display = 'block';
                        });
                        document.getElementById('noResults').style.display = 'none';
                    }
                });
            }
            
            // Close modals when clicking outside
            window.addEventListener('click', function(event) {
                const quoteModal = document.getElementById('quoteModal');
                const adminModal = document.getElementById('adminModal');
                const productModal = document.getElementById('productModal');
                
                if (event.target === quoteModal) {
                    quoteModal.style.display = 'none';
                }
                if (event.target === adminModal) {
                    adminModal.style.display = 'none';
                }
                if (event.target === productModal) {
                    productModal.style.display = 'none';
                }
            });
        });
    </script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
    // SUPABASE CONFIGURATION - Using your actual credentials
    const SUPABASE_URL = 'https://kunrareegagtlxiudfa.supabase.co';
    const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt1bnJhcmllZWdhZ3RreGl1ZGZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk1MTIyMjgsImV4cCI6MjA3NTA4ODIyOH0.cAcKViNIT6qI5eFM18IDaWKWsAIfwQ3gvugFo0iWbaI';
    
    const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

    // Data Manager that now uses Supabase
    const dataManager = {
        products: {},
        categories: {},
        projects: {},
        inquiries: {},
        contactSettings: {}
    };

    // Initialize admin panel
    document.addEventListener('DOMContentLoaded', function() {
        loadAllDataFromSupabase();
        showSection('dashboard');
    });

    // Load all data from Supabase
    async function loadAllDataFromSupabase() {
        try {
            // Load products
            const {  products, error: prodError } = await supabase
                .from('products')
                .select('*');
            
            if (!prodError && products) {
                dataManager.products = {};
                products.forEach(product => {
                    dataManager.products[product.id] = product;
                });
            }

            // Load categories
            const {  categories, error: catError } = await supabase
                .from('categories')
                .select('*');
                
            if (!catError && categories) {
                dataManager.categories = {};
                categories.forEach(category => {
                    dataManager.categories[category.id] = category;
                });
            }

            // Load projects (R&D projects)
            const {  projects, error: projError } = await supabase
                .from('projects')
                .select('*');
                
            if (!projError && projects) {
                dataManager.projects = {};
                projects.forEach(project => {
                    dataManager.projects[project.id] = project;
                });
            }

            // Load inquiries
            const {  inquiries, error: inqError } = await supabase
                .from('inquiries')
                .select('*');
                
            if (!inqError && inquiries) {
                dataManager.inquiries = {};
                inquiries.forEach(inquiry => {
                    dataManager.inquiries[inquiry.id] = inquiry;
                });
            }

            // Load contact settings
            const {  settings, error: settError } = await supabase
                .from('contact_settings')
                .select('*')
                .limit(1);
                
            if (!settError && settings && settings.length > 0) {
                dataManager.contactSettings = settings[0];
            }

            console.log('Data loaded from Supabase successfully');
            
            // Refresh all tables and stats
            renderDashboard();
            renderProducts();
            renderCategories();
            renderProjects();
            renderInquiries();
            
        } catch (error) {
            console.error('Error loading data from Supabase:', error);
            
            // Load default/demo data if Supabase fails
            loadDefaultData();
        }
    }

    // Save product to Supabase
    async function saveProductToSupabase(product) {
        try {
            const { data, error } = await supabase
                .from('products')
                .upsert([product], { onConflict: 'id' });
                
            if (error) throw error;
            
            dataManager.products[product.id] = product;
            return true;
        } catch (error) {
            console.error('Error saving product:', error);
            alert('Error saving product to database');
            return false;
        }
    }

    // Save category to Supabase
    async function saveCategoryToSupabase(category) {
        try {
            const { data, error } = await supabase
                .from('categories')
                .upsert([category], { onConflict: 'id' });
                
            if (error) throw error;
            
            dataManager.categories[category.id] = category;
            return true;
        } catch (error) {
            console.error('Error saving category:', error);
            alert('Error saving category to database');
            return false;
        }
    }

    // Save project to Supabase
    async function saveProjectToSupabase(project) {
        try {
            const { data, error } = await supabase
                .from('projects')
                .upsert([project], { onConflict: 'id' });
                
            if (error) throw error;
            
            dataManager.projects[project.id] = project;
            return true;
        } catch (error) {
            console.error('Error saving project:', error);
            alert('Error saving project to database');
            return false;
        }
    }

    // Delete product from Supabase
    async function deleteProductFromSupabase(productId) {
        try {
            const { error } = await supabase
                .from('products')
                .delete()
                .eq('id', productId);
                
            if (error) throw error;
            
            delete dataManager.products[productId];
            return true;
        } catch (error) {
            console.error('Error deleting product:', error);
            alert('Error deleting product from database');
            return false;
        }
    }

    // Delete category from Supabase
    async function deleteCategoryFromSupabase(categoryId) {
        try {
            const { error } = await supabase
                .from('categories')
                .delete()
                .eq('id', categoryId);
                
            if (error) throw error;
            
            delete dataManager.categories[categoryId];
            return true;
        } catch (error) {
            console.error('Error deleting category:', error);
            alert('Error deleting category from database');
            return false;
        }
    }

    // Your existing admin panel functions go here...
    // (Keep all your existing functions like toggleMode, showSection, renderDashboard, etc.)
    
    // Update the product save function to use Supabase
    async function saveProduct() {
        const form = document.getElementById('productForm');
        const formData = new FormData(form);
        
        const product = {
            id: formData.get('id') || generateId(),
            title: formData.get('title'),
            category: formData.get('category'),
            monthly_capacity: formData.get('monthlyCapacity'),
            price: formData.get('price'),
            overview: formData.get('overview'),
            applications: formData.get('applications'),
            specifications: JSON.parse(formData.get('specifications') || '{}'),
            processing_methods: formData.get('processingMethods') ? formData.get('processingMethods').split('\n') : [],
            certifications: formData.get('certifications') ? formData.get('certifications').split('\n') : [],
            images: JSON.parse(formData.get('images') || '[]'),
            videos: JSON.parse(formData.get('videos') || '[]'),
            documents: JSON.parse(formData.get('documents') || '[]'),
            status: formData.get('status') || 'active',
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
        };
        
        const success = await saveProductToSupabase(product);
        
        if (success) {
            closeModal('productModal');
            renderProducts();
            renderDashboard();
            alert('Product saved successfully!');
        }
    }

    // Update the category save function to use Supabase
    async function saveCategory() {
        const form = document.getElementById('categoryForm');
        const formData = new FormData(form);
        
        const category = {
            id: formData.get('id') || generateId(),
            name: formData.get('name'),
            description: formData.get('description'),
            status: formData.get('status') || 'active',
            created_at: new Date().toISOString(),
            updated_at: new Date().toISOString()
        };
        
        const success = await saveCategoryToSupabase(category);
        
        if (success) {
            closeModal('categoryModal');
            renderCategories();
            renderDashboard();
            alert('Category saved successfully!');
        }
    }

    // Update delete functions to use Supabase
    async function deleteProduct(id) {
        if (confirm('Are you sure you want to delete this product?')) {
            const success = await deleteProductFromSupabase(id);
            
            if (success) {
                renderProducts();
                renderDashboard();
                alert('Product deleted successfully!');
            }
        }
    }

    async function deleteCategory(id) {
        if (confirm('Are you sure you want to delete this category?')) {
            const success = await deleteCategoryFromSupabase(id);
            
            if (success) {
                renderCategories();
                renderDashboard();
                alert('Category deleted successfully!');
            }
        }
    }

    // Helper function to generate unique IDs
    function generateId() {
        return 'id_' + Math.random().toString(36).substr(2, 9) + '_' + Date.now();
    }

    // Load default data fallback (keep your existing demo data)
    function loadDefaultData() {
        // Your existing demo data here...
        dataManager.categories = {
            'proteins': {
                id: 'proteins',
                name: 'Sustainable Proteins',
                description: 'High-quality proteins derived from waste sources for various industrial applications',
                status: 'active'
            },
            'catalysts': {
                id: 'catalysts',
                name: 'Advanced Catalysts',
                description: 'Innovative catalysts from industrial waste streams for green manufacturing',
                status: 'active'
            }
        };

        dataManager.products = {
            'poultry-protein': {
                id: 'poultry-protein',
                title: 'Poultry Waste-Derived Protein',
                category: 'proteins',
                monthly_capacity: '50 tons/month',
                price: '$2,500/ton',
                overview: 'High-quality protein extracted from poultry waste streams',
                applications: 'Animal feed, fertilizer, industrial applications',
                specifications: { 'Protein Content': '85-92%', 'Moisture': '<8%' },
                status: 'active'
            }
        };

        // Render with demo data
        renderDashboard();
        renderProducts();
        renderCategories();
    }

    // Add all your existing admin panel functions here...
    // (I'm not including them all to keep this response focused, but keep all your existing functions)

</script>
</body>
</html>
